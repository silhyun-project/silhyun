<!DOCTYPE html>
<html lang='en'>
<head>
<meta charset='utf-8' />
<link href='/fullcalendar/main.css' rel='stylesheet' />
<!-- jquery -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
 <!-- bootstrap 4 -->
<link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
<!-- fullcalendar -->
<script src='/fullcalendar/main.js'></script>
<script src='/fullcalendar/locales/ko.js'></script>

<script>
		document.addEventListener('DOMContentLoaded', function() { //$(document).ready(function) {} -> 제이쿼리 구문
			var calendarEl = document.getElementById('calendar');
			var calendar = new FullCalendar.Calendar(calendarEl, {
				timeZone : 'UTC',
				initialView : 'dayGridMonth',
				locale : 'ko',
				events : [ // 일정 데이터 추가 , DB의 event를 가져오려면 JSON 형식으로 변환해 events에 넣어주면된다.
				{
					title : '일정',
					start : '2021-05-26 00:00:00'
				} ],
				headerToolbar : {
					center : 'addEventButton' // headerToolbar에 버튼을 추가
				},
				customButtons : {
					addEventButton : { // 추가한 버튼 설정
						text : "일정 추가", // 버튼 내용
						click : function() { // 버튼 클릭 시 이벤트 추가
							$("#calendarModal").modal("show"); // modal 나타내기
	
							$("#addCalendar").on(
									"click",
									function() { // modal의 추가 버튼 클릭 시
										var cntn = $("#calendar_content").val();
										var todoDate = $("#calendar_start_date").val();
												
										//내용 입력 여부 확인
										if (cntn == null || cntn == "") {
											alert("내용을 입력하세요.");
										} else if (todoDate == ""
											) {
											alert("날짜를 입력하세요.");
										} else { // 정상적인 입력 시
											var obj = {
												"cntn" : cntn,
												"todoDate" : todoDate
											} //전송할 객체 생성
	
											console.log(obj); //서버로 해당 객체를 전달해서 DB 연동 가능
										}
									});
						}
					}
				},
				editable : false, // false로 변경 시 draggable 작동 x 
				displayEventTime : false // 시간 표시 x
			});
			calendar.render();
		});
</script>
</head>
<style>
#calendarBox {
	width: 60%;
	padding-left: 15%;
}
</style>

<body>
	<div id="calendarBox">
		<div id="calendar"></div>
	</div>
	
	<!-- modal 추가 -->
	<div class="modal fade" id="calendarModal" tabindex="-1" role="dialog"
		aria-labelledby="exampleModalLabel" aria-hidden="true">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="exampleModalLabel">일정을 입력하세요.</h5>
					<button type="button" class="close" data-dismiss="modal"
						aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body">
					<div class="form-group">
						<label for="taskId" class="col-form-label">일정 내용</label> 
						<input type="text" class="form-control" id="calendar_content" name="calendar_content">
						<label for="taskId"	class="col-form-label">날짜</label>
						<input type="date" class="form-control" id="calendar_start_date" name="calendar_start_date">	 
					</div>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-warning" id="addCalendar">추가</button>
					<button type="button" class="btn btn-secondary"
						data-dismiss="modal" id="sprintSettingModalClose">취소</button>
				</div>
			</div>
		</div>
	</div>
</body>
</html>