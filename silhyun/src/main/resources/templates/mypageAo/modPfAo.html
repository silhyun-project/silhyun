<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{home/layout}">
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<style>
.check-label {
	display: inline-block;
	background-color: #fff;
	border: 1px solid #ccc;
	padding: 10px;
	border-radius: 5px;
	cursor: pointer;
}

.check-label input[type="checkbox"] {
	display: none;
	background-color: #ffffff;
}

.check-label input[type="checkbox"]:checked+span {
	color: #fff;
	background-color: #000000;
	margin-top: 10px;
}
</style>
</head>
<body>
	<!-- Main -->
	<main layout:fragment="content">
		<!-- Breadcrumb -->
		<div class="py-3 bg-gray-100">
			<div class="container">
				<div class="row align-items-center">
					<div class="col-lg-6 my-2">
						<h1 class="m-0 h4 text-center text-lg-start">Profile</h1>
					</div>
					<div class="col-lg-6 my-2">
						<ol
							class="breadcrumb dark-link m-0 small justify-content-center justify-content-lg-end">
							<li class="breadcrumb-item"><a class="text-nowrap" href="#"><i
									class="bi bi-home"></i>Home</a></li>
							<li class="breadcrumb-item text-nowrap active"
								aria-current="page">Profile</li>
						</ol>
					</div>
				</div>
			</div>
		</div>
		<!-- End Breadcrumb -->
		<!-- Table -->
		<div class="py-6">
			<div class="container">
				<div class="row" th:each="ptg : ${ptgInfo}">
					<!-- Profile Menu -->
					<div class="col-lg-4 pb-4 pb-lg-0 col-xxl-3  pe-xxl-5">
						<div class="bg-white border border-bottom-0 shadow-lg">
							<div class="d-flex p-3 align-items-center">
								<!-- 프로필 사진 바꾸기 모달  -->
								<div class="modalImage" onclick="modalImage()">
									<div class="avatar avatar-lg rounded-circle">
										<img th:src="${ptg.profile}" title="" alt="">
									</div>
								</div>
								<div class="modal">
									<p>프로필 사진 바꾸기</p>
									<button onclick="profileImageUpload()">사진 업로드</button>
									<button onclick="closePopup('.modalImage')">취소</button>
								</div>
								<!-- 프로필 사진 바꾸기 모달 끝 -->
								<div class="col ps-3">
									<h6 class="m-0" th:text="${ptg.Id}"></h6>
									<small><a href="#" th:text="${ptg.name}"></a></small>
								</div>
								<div>
									<button>회원변경</button>
								</div>
							</div>
							<ul class="list-unstyled mb-0 theme-link">
								<li class="border-bottom mb-0"><a
									class="nav-link-style d-flex align-items-center p-3"
									href="/photo/modPfAo"> <i class="fi-user me-2"></i>회원정보수정
								</a></li>
								<li class="border-bottom mb-0"><a
									class="nav-link-style d-flex align-items-center p-3"
									href="/photo/resManage"> <i class="bi bi-card-checklist"></i>예약
										관리
								</a></li>
								<li class="border-bottom mb-0"><a
									class="nav-link-style d-flex align-items-center p-3"
									href="/photo/classManage"> <i class="bi-play-btn me-2"></i>클래스
										관리
								</a></li>
								<li class="border-bottom mb-0"><a
									class="nav-link-style d-flex align-items-center p-3"
									href="/photo/mypageAoAsk"> <i
										class="bi-chat-square-dots me-2"></i>문의내역
								</a></li>
								<li class="border-bottom mb-0"><a
									class="nav-link-style d-flex align-items-center p-3"
									href="/photo/resCalendarAo"> <i class="bi-calendar me-2"></i>캘린더
								</a></li>
								<li class="border-bottom mb-0"><a
									class="nav-link-style d-flex align-items-center p-3"
									href="/photo/mypageStatsAo"> <i
										class="bi bi-pie-chart-fill"></i>통계
								</a></li>
								<li class="border-bottom mb-0"><a
									class="nav-link-style d-flex align-items-center p-3" href="#">
										<i class="bi-person-bounding-box me-2"></i>포토폴리오
								</a></li>
								<li class="border-bottom mb-0"><a
									class="nav-link-style d-flex align-items-center p-3"
									href="/photo/reportFormAo"> <i
										class="bi bi-exclamation-diamond"></i>신고
								</a></li>
								<li class="border-bottom mb-0"><a
									class="nav-link-style d-flex align-items-center p-3" href="#">
										<i class="bi bi-box-arrow-left me-2"></i>회원탈퇴
								</a></li>
							</ul>
						</div>
					</div>
					<!-- End Profile Menu -->
					<!-- Content -->
					<div class="col-lg-8 col-xxl-9">
						<div class="card mb-5">
							<div class="card-header py-3">
								<h5 class="m-0">Profile Update</h5>
							</div>
							<!-- 폼 시작 -->
							<form method="post" action="/updateMyPg">
								<div class="card-body">
									<div class="row">
										<div class="col-sm-6 mb-3">
											<label></label> <input class="form-control" type="file"
												id="userProfileImageInput">
										</div>
										<div class="col-sm-6 mb-3">
											<label class="form-label">아이디</label> <input type="text"
												class="form-control" th:value="${ptg.Id}" placeholder="아이디"
												readonly>
										</div>
										<div class="col-sm-6 mb-3">
											<label class="form-label">이름<span class="text-danger">*</span></label>
											<input type="text" class="form-control" id="name" name="name"
												th:value="${ptg.name}" placeholder="이름">
										</div>
										<div class="col-sm-6 mb-3">
											<label class="form-label">비밀번호<span
												class="text-danger">*</span></label> <input type="password"
												class="form-control" id="pwd" name="pwd" placeholder="비밀번호">
										</div>
										<div class="col-sm-6 mb-3">
											<label class="form-label">비밀번호확인<span
												class="text-danger">*</span></label> <input type="password"
												class="form-control" placeholder="비밀번호 확인">
										</div>
										<div class="col-sm-6 mb-3">
											<label class="form-label">Email<span
												class="text-danger">*</span></label> <input type="email"
												class="form-control" id="email" name="email"
												placeholder="E-mail">
										</div>
										<div class="col-sm-6 mb-3">
											<label class="form-label">전화번호<span
												class="text-danger">*</span></label> <input type="text"
												class="form-control" th:value="${ptg.tel}" name="tel"
												id="tel" placeholder="전화번호">
										</div>
										<div class="col-sm-6 mb-3">
											<label class="form-label">생년월일</label> <input type="text"
												class="form-control" id="birthDate" name="birthDate">
										</div>
										<div class="col-sm-12 mb-3">근무 가능 요일</div>
										<div class="col-sm-12 mb-3">

											<input type="checkbox" class="workDay"> <label
												class="form-check-label" for="exampleCheck1">월</label>
											&emsp;&emsp; <input type="checkbox" class="workDay">
											<label class="form-check-label" for="exampleCheck1">화</label>
											&emsp;&emsp; <input type="checkbox" class="workDay">
											<label class="form-check-label" for="exampleCheck1">수</label>
											&emsp;&emsp; <input type="checkbox" class="workDay">
											<label class="form-check-label" for="exampleCheck1">목</label>
											&emsp;&emsp; <input type="checkbox" class="workDay">
											<label class="form-check-label" for="exampleCheck1">금</label>&emsp;&emsp;
											<input type="checkbox" class="workDay"> <label
												class="form-check-label" for="exampleCheck1">토</label>
											&emsp;&emsp; <input type="checkbox" class="workDay">
											<label class="form-check-label" for="exampleCheck1">일</label>
											&emsp;&emsp;
										</div>
										<div class="row align-items-center">
											<div class="col-12 pt-2">
												<button class="btn btn-primary" type="submit">저장</button>
											</div>
										</div>
									</div>
								</div>
							</form>
							<!-- 모달 -->
							<div class="col-sm-12 mb-3">
								<button type="button" class="btn btn-primary"
									data-bs-toggle="modal" data-bs-target="#workTimeSel">근무시간</button>
								<div class="modal fade" id="workTimeSel">
									<div class="modal-dialog modal-dialog-centered">
										<div class="modal-content">
											<div class="modal-header bg-primary">
												<div class="modal-title p-3">
													<h5 class="m-0 text-white">근무시간</h5>
												</div>
											</div>
											<div class="modal-body">
												<div class="w-100 p-3">
													<!-- Form START -->
													<form id="upWorkTime">
														<!-- action="/upWorkTime" -->
														<!--근무 시간 체크박스  -->
														<label>오전</label>
														<div id="resTime">
															<div class="col-sm-12 mb-3">
																<label class="check-label"> <input
																	type="checkbox" class="resTime" name="resTime"
																	value="A"> <span>AM 10:00</span>
																</label> &emsp; <label class="check-label"> <input
																	type="checkbox" class="resTime" name="resTime"
																	value="B"> <span>AM 10:30</span>
																</label> &emsp; <label class="check-label"> <input
																	type="checkbox" class="resTime" name="resTime"
																	value="C"> <span>AM 11:00</span>
																</label>&emsp; <label class="check-label"> <input
																	type="checkbox" class="resTime" name="resTime"
																	value="D"> <span>AM 11:30</span>
																</label>&emsp;
															</div>
															<label>오후</label>
															<div class="col-sm-12 mb-3">
																<label class="check-label"> <input
																	type="checkbox" class="resTime" name="resTime"
																	value="E"> <span>PM 2:00</span>
																</label>&emsp; <label class="check-label"> <input
																	type="checkbox" class="resTime" name="resTime"
																	value="F"> <span>PM 2:30</span>
																</label>&emsp; <label class="check-label"> <input
																	type="checkbox" class="resTime" name="resTime"
																	value="G"> <span>PM 3:00</span>
																</label>&emsp; <label class="check-label"> <input
																	type="checkbox" class="resTime" name="resTime"
																	value="H"> <span>PM 3:30</span>
																</label>&emsp; <label class="check-label"> <input
																	type="checkbox" class="resTime" name="resTime"
																	value="I"> <span>PM 4:00</span>
																</label>&emsp; <label class="check-label"> <input
																	type="checkbox" class="resTime" name="resTime"
																	value="J"> <span>PM 4:30</span>
																</label> &emsp; <label class="check-label"> <input
																	type="checkbox" class="resTime" name="resTime"
																	value="K"> <span>PM 5:00</span>
																</label> &emsp; <label class="check-label"> <input
																	type="checkbox" class="resTime" name="resTime"
																	value="L"> <span>PM 5:30</span>
																</label> &emsp; <label class="check-label"> <input
																	type="checkbox" class="resTime" name="resTime"
																	value="M"> <span>PM 6:00</span>
																</label> &emsp; <label class="check-label"> <input
																	type="checkbox" class="resTime" name="resTime"
																	value="N"> <span>PM 6:30</span>
																</label>
															</div>
														</div>
														<div class="row align-items-center">
															<div class="col-12 pt-2">
																<button type="submit" class="btn btn-primary" 
																	onclick="sendData()">저장</button>
															</div>
														</div>
														<!-- id숨겨놓음 -->
														<input type="hidden" name="ptgId" value="user3">
													</form>
												</div>
											</div>

										</div>
									</div>
								</div>
							</div>
							<!--모달끝  -->
						</div>

					</div>
				</div>
				<!-- End Content -->
			</div>
		</div>

		<!--Table -->

		<script>
  	function sendData() {
	    var formData = new FormData($("#upWorkTime")[0]);
	    var ptgId=document.querySelector('input[name="ptgId"]').value;
	    var oData = [];
	 // 체크된 체크박스들을 담을 배열 생성
	    const checkedValues = [];

	    // 체크된 체크박스들의 값을 배열에 추가
	    const checkboxes = document.querySelectorAll('.resTime');
	    checkboxes.forEach((checkbox) => {
	      if (checkbox.checked) {
	        checkedValues.push(checkbox.value);
	      }
	    });
	
	 	checkedValues.forEach((value) => {
	 	  oData.push({
	 	    resTime: value,
	 	    ptgId: ptgId
	 	  });
	 	});
	 	console.log(oData);
	

	//formData.append('oData',JSON.stringify(oData))	    
	    $.ajax({
	        url: '/upWorkTime',
	        method: "POST",
	        data:JSON.stringify(oData),
	        contentType: "application/json",
	        dataType : "json"
	      
	    })
	    .then(res => {
	    	console.log(res)
	    });
	} 
 	 
 
	</script>
	</main>
	<!-- End Main -->
</body>
</html>