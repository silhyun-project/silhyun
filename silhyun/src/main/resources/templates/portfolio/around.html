<!doctype html>
<html lang="zxx" xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{home/layout}">

<head>
<!-- metas -->
<meta charset="utf-8">
<meta name="author" content="pxdraft" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport"
	content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="keywords" content="ShopApp - eCommerce Bootstrap 5 Template" />
<meta name="description"
	content="ShopApp - eCommerce Bootstrap 5 Template" />
<!-- title -->
<title>ShopApp - eCommerce Bootstrap 5 Template</title>
<!-- Favicon -->
<link rel="shortcut icon" href="/img/favicon.ico">
<!-- CSS Template -->
<link href="/css/theme.css" rel="stylesheet">
<link href="/css/around.css" rel="stylesheet">

<!-- 자체어쩌구-->
<link href="/css/around.css" rel="stylesheet">
<script src="https://code.jquery.com/jquery-3.6.3.js"
	integrity="sha256-nQLuAZGRRcILA+6dMBOvcRh5Pe310sBpanc6+QBmyVM="
	crossorigin="anonymous"></script>
<!-- 자체어쩌구 -->
</head>

<body>
	<div layout:fragment="content">

		<!-- Main -->
		<main>
			<!-- Breadcrumb -->
			<div class="py-3 bg-gray-100">
				<div class="container-fluid px-xxl-8">
					<div class="row align-items-center">
						<div class="col-lg-6 my-2">
							<h1 class="m-0 h4 text-center text-lg-start">둘러보기</h1>
						</div>
						<div class="col-lg-6 my-2">
							<ol
								class="breadcrumb dark-link m-0 small justify-content-center justify-content-lg-end">
								<li class="breadcrumb-item"><a class="text-nowrap" href="#"><i
										class="bi bi-home"></i>Home</a></li>
								<li class="breadcrumb-item text-nowrap active"
									aria-current="page">Product</li>
							</ol>
						</div>
					</div>
				</div>
			</div>
			<!-- End Breadcrumb -->
			<!-- Shop -->
			<section class="py-6">
				<div class="container-fluid px-xxl-8">
					<div class="row">
						<!-- Sidebar -->
						<div
							class="col shop-sidebar-option-04 d-none d-lg-block mb-auto sticky-lg-top sticky-lg-top-header">
							<!-- Categories -->
							<div class="shop-categories-list">
								<div class="shop-attr-body">
									<ul class="nav nav-level-1 flex-column">
										<li class="nav-item"><a href="#" class="nav-link">둘러보기</a>
										</li>

									</ul>
									<ul class="nav flex-column">
										<li class="nav-item"><a href="#" class="nav-link active">둘러보기</a>
										</li>
										<li class="nav-item"><a href="#" class="nav-link">후기
												모음</a></li>
										<li class="nav-item"><a href="#" class="nav-link">장소
												추천</a></li>
										<li class="nav-item"><a href="#" class="nav-link">팁
												게시글</a></li>
										<li class="nav-item"><a href="#" class="nav-link">온라인
												전시회</a></li>

									</ul>
								</div>
							</div>
							<!-- End Categories -->
						</div>
						<!-- End Sidebar -->
						<!-- Product Box -->
						<div class="col-lg-8 col-xl-9">

							<!-- 검색창 -->
							<div class="col-md-6">

								<div class="form">
									<i class="bi-search"></i> <input type="text"
										class="form-control form-input" placeholder="태그검색"> <span
										class="left-pan"> <i class="bi-x-circle-fill"></i>
									</span>
								</div>

							</div>
							<br>
							<!-- 검색창 끝-->

							<p class="michin-nom">[[${#lists.size(portfolioList)}]]</p>
							<p class="michin-nom">[[${portfolioList[0]}]]</p>



							<!-- 태그버튼 -->
							<div class="shop-top-bar d-flex pb-3">
								<div class="layout-change">
									<!-- 태그자리 -->
								</div>
								<!-- 태그버튼 -->

								<div class="shortby-dropdown ms-auto">
									<div class="dropdown">
										<a class="btn btn-white btn-sm border dropdown-toggle"
											href="#" role="button" id="dropdownMenuLink"
											data-bs-toggle="dropdown" aria-expanded="false">정렬</a>
										<ul class="dropdown-menu dropdown-menu-end shadow"
											aria-labelledby="dropdownMenuLink">
											<li><a class="dropdown-item" href="#">최신순</a></li>
											<li><a class="dropdown-item" href="#">좋아요순</a></li>
										</ul>
									</div>
								</div>
							</div>

							<!-- 사진붙이는 태그 -->
							<div class="row g-3" id="rowg-3">


								<!-- 첨에 들어갔을 때 포트폴리오 저장된 사진 보여주는 ~ Product Box -->


								<!-- 사진 자리~~ -->

							</div>
							<div class="shop-bottom-bar d-flex align-items-center mt-3">
								<div>Showing: 1 - 12 of 17</div>
								<div class="ms-auto">
									<ul class="pagination">
										<li class="page-item"><a class="page-link" href="#"
											aria-label="Previous"> <span aria-hidden="true">&laquo;</span>
										</a></li>
										<li class="page-item active"><a class="page-link"
											href="#">1</a></li>
										<li class="page-item"><a class="page-link" href="#">2</a></li>
										<li class="page-item"><a class="page-link" href="#">3</a></li>
										<li class="page-item"><a class="page-link" href="#"
											aria-label="Next"> <span aria-hidden="true">&raquo;</span>
										</a></li>
									</ul>
								</div>
							</div>
						</div>
						<!-- End Product Box -->
					</div>
				</div>
			</section>
			<!-- End Shop -->
		</main>
		<!-- End Main -->



		<!-- 모달 시작 -->
		<section class="product-details py-6">
			<div class="container" id="modalContainer">
				<div id="modal" class="modal-overlay">
					<div class="close-area">X</div>
					<div class="row align-items-start modal-window">
						<!-- Product Gallery -->
						<div
							class="col-lg-6 lightbox-gallery sticky-lg-top sticky-lg-top-header"
							id="modalPic">
							<!-- 사진이 더 잇다면 슬라이드...? -->
							<div class="swiper swiper-container"
								data-swiper-options='{
                  "slidesPerView": 1,
                  "spaceBetween": 0,
                  "pagination": {
                    "el": ".swiper-pagination",
                    "clickable": true
                  },
                  "navigation": {
                    "nextEl": ".swiper-next-01",
                    "prevEl": ".swiper-prev-01"
                  }
                }'>
								<div class="swiper-wrapper">
									<div class="swiper-slide">
										<div class="bg-no-repeat bg-cover bg-center"
											style="background-image: url(/img/fashion/1000x1000.jpg);">
											<div class="container">
												<div
													class="row min-vh-85 align-items-center justify-content-center py-12">

												</div>
											</div>
										</div>
									</div>
									<div class="swiper-slide">
										<div class="bg-no-repeat bg-cover bg-center"
											style="background-image: url(/img/fashion/1000x1000.jpg);">
											<div class="container">
												<div
													class="row min-vh-85 align-items-center justify-content-center py-12">

												</div>
											</div>
										</div>
									</div>


								</div>
								<div class="swiper-arrow-style-01 swiper-next swiper-next-01">
									<i class="bi-chevron-right"></i>
								</div>
								<div class="swiper-arrow-style-01 swiper-prev swiper-prev-01">
									<i class="bi-chevron-left"></i>
								</div>
								<div class="swiper-pagination swiper-pagination-white"></div>
							</div>
							<!-- 사진이 더 잇다면 슬라이드...? -->

						</div>
						<!-- End Product Gallery -->
						<!-- Product Details -->
						<div class="col-lg-6 ps-lg-5 pt-5 pt-lg-0" id="modalCon">
							<div class="product-detail">
								<!-- 작가프로필 아이디 자리 시작-->
								<div class="modalHeader">
									<div class="d-flex review-box border-top mt-4 pt-4">
										<div>
											<div class="review-image">
												<img class="img-fluid" src="/img/fashion/1000x1000.jpg"
													title="" alt="프로필사진자리~~~~">
											</div>
										</div>
										<div class="col ps-3">
											<span><strong class="comNick">닉넴</strong></span>&nbsp;&nbsp;
											<span><button>follow</button></span>&nbsp;&nbsp;
										</div>
									</div>
								</div>
								<!-- 작가프로필 아이디 자리 끝-->
								<!-- 내용 및 댓글 시작-->
								<div id="modalConList">
									<!-- 내용 -->

									<!-- 내용 -->
									<!-- 댓글리스트 -->
									<div class="product-description"
										style="overflow-y: scroll; height: 100%;">
										<div class="d-flex review-box border-top mt-4 pt-4">
											<div>
												<div class="review-image">
													<img class="img-fluid" src="/img/fashion/1000x1000.jpg"
														title="" alt="프로필사진자리~~~~">
												</div>
											</div>
											<div class="col ps-3">
												<span><strong class="comNick">닉넴</strong></span>&nbsp;&nbsp;
											</div>
											<div>
												<div>작가가 적은 내용</div>
												<div>
													<i class="bi bi-heart-fill"></i> <i class="bi bi-heart"></i>
													<small>(1만개)</small>
												</div>
											</div>
										</div>
										<div class="col-lg-8 pe-lg-8">
											<div class="products-brand pb-2">
												<span>댓글</span>
											</div>
										</div>
										<div class="d-flex review-box border-top mt-4 pt-4">
											<div>
												<div class="review-image">
													<img class="img-fluid" src="/img/fashion/1000x1000.jpg"
														title="" alt="프로필사진자리~~~~">
												</div>
											</div>
											<div class="col ps-3">
												<span><strong class="comNick">닉넴</strong></span>&nbsp;&nbsp;
												<span class="m-0 pt-3">댓글내용자리요...</span> 댓글쓴시간 댓글쓰기

												<!-- 덧댓글자리 -->
												<div class="product-detail-collapse">
													<div class="pd-collapse-row">
														<a class="pd-collapse-h5" data-bs-toggle="collapse"
															href="#pd_review" role="button" aria-expanded="false"
															aria-controls="pd_review">댓글더보기(덧댓글개수)이 자체가 잇으면 보여주기.</a>
														<div class="collapse" id="pd_review">
															<div class="pd-collapse-box">
																<div class="row align-items-end"></div>
																<div class="d-flex review-box border-top mt-4 pt-4">
																	<div>
																		<div class="review-image">
																			<img class="img-fluid"
																				src="/img/fashion/1000x1000.jpg" title=""
																				alt="프로필사진자리~~~~">
																		</div>
																	</div>
																	<div class="col ps-3">
																		<span><strong class="comNick">닉넴</strong></span>&nbsp;&nbsp;
																		<span class="m-0 pt-3">댓글내용자리요...</span>
																	</div>
																</div>

															</div>
														</div>
													</div>
												</div>
												<!-- 덧댓글자리 -->


											</div>
										</div>
										<div class="d-flex review-box border-top mt-4 pt-4">
											<div>
												<div class="review-image">
													<img class="img-fluid" src="/img/fashion/1000x1000.jpg"
														title="" alt="프로필사진자리~~~~">
												</div>
											</div>
											<div class="col ps-3">
												<span><strong class="comNick">닉넴</strong></span>&nbsp;&nbsp;
												<span class="m-0 pt-3">댓글내용자리요...</span>
											</div>
										</div>
										<div class="d-flex review-box border-top mt-4 pt-4">
											<div>
												<div class="review-image">
													<img class="img-fluid" src="/img/fashion/1000x1000.jpg"
														title="" alt="프로필사진자리~~~~">
												</div>
											</div>
											<div class="col ps-3">
												<span><strong class="comNick">닉넴</strong></span>&nbsp;&nbsp;
												<span class="m-0 pt-3">댓글내용자리요...</span>
											</div>
										</div>

									</div>
									<!-- 댓글리스트 -->
								</div>
								<!-- 내용 및 댓글 끝-->
								<div class="modalFooter">
									<div class="product-detail-actions d-flex flex-wrap pt-3">

										<div class="heart-icon">
											<i class="bi bi-heart"></i>
										</div>
										<div class="repeat-icon">
											<i class="bi bi-repeat"></i>
										</div>

									</div>
									<div>
										<div>
											좋아요 <span>조아요개수~</span>
										</div>
									</div>
									<div>글작성일</div>

									<!-- 										댓글작성폼 -->
									<div class="mt-8 border p-4">
										<form method="post">
											<div class="row">

												<div class="col-12">
													<div class="form-group mb-3">

														<textarea class="form-control" id="contact-message"
															name="message" style="height: 50px"
															placeholder="댓글작성해주세요"></textarea>
													</div>
												</div>
												<div class="col-12">
													<button class="btn btn-primary" type="submit" name="send">게시</button>
												</div>
											</div>
										</form>
									</div>
									<!-- 										댓글작성폼 -->
								</div>


								<!-- More Details -->

								<!-- End More Details -->
							</div>
						</div>
						<!-- End Product Details -->
					</div>

				</div>

			</div>
		</section>
		<!-- 모달 끝 -->

		<!-- js -->
		<!-- 		포트폴리오리스트띄우는 -->
		<script th:inline="javascript">
		/*<![CDATA[*/
			const portfolio = /*[[${portfolioList}]]*/
			/*]]>*/
			console.log(portfolio);
 				
		$("div#rowg-3").children().remove();//먼저 깔끔희~
		StandLine(portfolio);//첫페이지 포트폴리오 리스트
		recentStand(portfolio);//최신순
		likeStand(portfolio);//조아용

 		
		
		//태그별로 포트폴리오 리스트 가져오기.
// 		for(i=0;i<$('div .layout-change').children().length;i++){
//  			$('div .layout-change').children().eq(i).click(function(){
 			
//  			var tagCntn=$(this).children().text();
		
//  			$.ajax({
//                       url: "/silhyun/aroundTagList",
//                        type: "post",
//                        data:JSON.stringify({tagCntn: tagCntn}),
//                        contentType: "application/json"
//                    })
//                    .then(res => {
//                    	console.log(res)
                   	
//                    	//이전에 리스트 먼저 지워주기
//                     $("div#rowg-3").children().remove();	
//                    	StandLine(res);
//             		recentStand(res);
//             		likeStand(res); 		                 
//                    })
//  			});//클릭펑션~~		
// 		}//포문닫기
 			

		
		//태그 5개만 가져오긔~~~~~~
		$.ajax({
            url: "/silhyun/tagList",
             type: "get",
             dataType: 'json',
         })
         .then(data => {
   			for(i=0; i<5 && i<data.length; i++){
         	var taag=`<a class="btn btn-sm" href="#" align="center"> <i
				class="">${data[i].tagCntn}</i>
				</a> `
        	$('div .layout-change').append(taag);
   			}
         });
		
		//그룹이벤트어쩌구 주기..........
		$('div .layout-change').on('click','a',function(){//layout-change의 a태그에만 click펑션을 주기.//그룹이벤트
			$('div .layout-change .active').removeClass('active');//active클래스만 없애기.
			$(this).addClass('active')
			var tagCntn=$(this).children().text();		
			//해당태그포트폴리오가져오기
			$.ajax({
                      url: "/silhyun/aroundTagList",
                      data:{tagCntn: tagCntn}
                   })
           .then(res => {
        	   console.log(res);
                   	//이전에 리스트 먼저 지워주기
                    $("div#rowg-3").children().remove();	
                   	StandLine(res);
            		recentStand(res);
            		likeStand(res); 		                 
            })
		})
	
	
	
		$("div .col-sm-6.col-lg-3").click(function(){//포트폴리오 모달 띄울려구....
			var portNum = $(this).children('div .portInfo').text();
		console.log(portNum)
			//포트폴리오내용
			$.ajax({
				 url:'/silhyun/detailPortfolio/'+portNum,
				 dataType: 'json',
	         })
	         .then(res => {
	   			console.log(res)
	   			
	   			
	         });
			
		});//포트폴리오 클릭 시 모달띄우는 ~

		//let list=[];
		//list.push(tagCntn);
		//$(document).ready(function(){
		
		
		//});
 				//$(document).ready(function(){
		//사진정렬시켜서 붙이는 거...
//  			});//document.ready



	//포트폴리오 사진 리스트 불러오기~함수+포트폴리오 번호
		function StandLine(aa){
			for(i=0; i<aa.length; i++){
				
				const portPhotoList = `<div class="col-sm-6 col-lg-3 btn-modal">
					<div class='portInfo' style='display:none'>`+aa[i].portNum+`</div>
								<div class="product-card-1">
									<div class="product-card-image">
										<div class="badge-ribbon"></div>
										<div class="product-action">
											<a href="#" class="btn btn-outline-primary"> <i
												class="fi-heart"></i>
											</a>
										</div>
										<div class="product-media">
											<a href="#"> <img class="img-fluid"
												src="`+aa[i].phoRt +`" title="" alt="">
											</a>
										</div>
									</div>
								</div>
							</div>`
		
			$("div#rowg-3").append(portPhotoList);		
							
							
							
							//클릭한 사진의 포트폴리오 번호 빼와....?
									
							
			}
		}
		//포트폴리오 사진 리스트 불러오기~함수
		
		
		//최신순 정렬
		function recentStand(portfolioA){
		$("li:contains('최신순')").click(function(){
			const recentList = portfolioA.sort((a, b) => new Date(a.portDate) - new Date(b.portDate));
		$("div#rowg-3").children().remove();	
			StandLine(recentList);
		});
		}
		
		//조아요순 정렬
		function likeStand(portfolioB){
		$("li:contains('좋아요순')").click(function(){
			const likeList = portfolioB.sort((a, b) => b.likes - a.likes)
		$("div#rowg-3").children().remove();	
			StandLine(likeList);
		});
		}
		
	
		
	
		////////////////////모달~~~
		const modal = document.getElementById("modal")
		
		
		function modalOn() {
		    modal.style.display = "flex"
		}
		function isModalOn() {
		    return modal.style.display === "flex"
		}
		function modalOff() {
		    modal.style.display = "none"
		}
		$('div .btn-modal').on('click',function(){
			modalOn();
			});//사진 클릭하면 모달창띄우기 함
	
		$('div .close-area').on('click',function(){
			modalOff();
			});//엑스누르면 모달창 닫기
	
		modal.addEventListener("click", e => {
		    const evTarget = e.target
		    if(evTarget.classList.contains("modal-overlay")) {
		        modalOff()
		    }
		})
		window.addEventListener("keyup", e => {
		    if(isModalOn() && e.key === "Escape") {
		        modalOff()
		    }
		})
		////////////////////모달~~~

		</script>


		<script src="/js/around.js"></script>
		<!-- js -->
	</div>

	<!-- 
    ========================
       End Wrapper 
    ========================
    -->
	<!-- script start -->
	<!-- jquery -->
	<script src="/js/jquery-3.5.1.min.js"></script>
	<!--bootstrap-->
	<script src="/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
	<!-- slick carousel -->
	<script src="/vendor/swiper/swiper-bundle.min.js"></script>
	<!-- magnific -->
	<script src="/vendor/magnific/jquery.magnific-popup.min.js"></script>
	<!-- isotope -->
	<script src="/vendor/isotope/isotope.pkgd.min.js"></script>
	<!-- count-down -->
	<script src="/vendor/count-down/jquery.countdown.min.js"></script>
	<!-- count-down -->
	<script src="/vendor/jarallax/jarallax-all.js"></script>
	<!-- Theme Js -->
	<script src="/js/custom.js"></script>
	<script src="/js/theme.js"></script>

	<!-- End script start -->
	</div>
</body>

</html>