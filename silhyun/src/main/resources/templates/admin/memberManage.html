<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org"
    xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorate="~{admin/dashBoard}">
    <script src="https://code.jquery.com/jquery-3.6.3.js" integrity="sha256-nQLuAZGRRcILA+6dMBOvcRh5Pe310sBpanc6+QBmyVM=" crossorigin="anonymous"></script>
<style>
	.green{ background-color: green;}
</style>
<body>
    <div layout:fragment="content">

        <!-- 본문 시작 -->
        <div class="page-breadcrumb bg-white">
            <div class="row align-items-center">
                <div class="col-lg-3 col-md-4 col-sm-4 col-xs-12">
                    <h3 class="page-title">회원 관리</h3>
                </div>
            </div>
        </div>

        <!-- 테이블 시작 -->
        <form id="memberFrm" method="post">
        <div id="memberList">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-sm-12">
                        <div class="white-box">
                            <div>
                                <!-- 분류 이름 -->
                                <h3 class="box-title">회원</h3>
                                

  
  
                                <!-- 통계 정보 -->
                                <p class="text-muted" style="float:left; font-size:16px; margin-top:3px;">
                                    신규 회원: <code th:text="${todayMem.size}"></code> &nbsp; 총 회원: <code th:text="${memberList.size}"></code></p>
                                <!-- 검색 -->
                                <form role="search" class="app-search d-none d-md-block me-3">
                                    <ul style="list-style:none;float:right;">
                                        <li>
                                            <select style="width:120px;height:30px;font-size:16px;border:none;">
                                             	<option value="">전체</option>
                                                <option value="">아이디</option>
                                                <option value="">이름</option>
                                                <option value="">이메일</option>
                                                <option value="">휴대전화</option>
                                                <option value="">가입날짜</option>
                                                <option value="">생년월일</option>
                                                <option value="">성별</option>
                                                <option value="">포인트</option>
                                                <option value="">멤버권한</option>
                                            </select>
                                            <input type="text" placeholder="Search..." class="form-control mt-0"
                                                style="display:inline-block;width:300px;height:30px;font-size:16px;">
                                            <a href="" class="active"><i class="fa fa-search"></i></a>
                                        </li>
                                    </ul>
                                </form>
                            </div>
                            <br>
                            <hr>
                            <!-- 회원 관리 본문 -->
                            <div class="table-responsive">
                                <!-- 회원 테이블 -->
                           <button type="button" class="btn btn-danger" style="color:white;" th:attr="onclick=|deleteSelectMember()|">선택삭제</button>
                                <table class="table text-nowrap">
                                    
                                    <thead>
                                    
                                        <tr>
                                        
         									<th><input type="checkbox" id="chkMemAll"></th>
                                            <th class="border-top-0">#</th>
                                            <th class="border-top-0">아이디</th>
                                            <th class="border-top-0">이름</th>
                                            <th class="border-top-0">이메일</th>
                                            <th class="border-top-0">휴대전화</th>
                                            <th class="border-top-0">가입날짜</th>
                                            <th class="border-top-0">생년월일</th>
                                            <th class="border-top-0">성별</th>
                                            <th class="border-top-0">포인트</th>
                                            <th class="border-top-0">멤버권한</th>
                                                               
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr th:each="mem,sts : ${memberList}" th:Class="${sts}">
                                        
                                    	    <td align="center"><input type="checkbox" name="chkMem"></td>
                                            <td th:text="${sts.count}"></td>
                                            <td th:text="${mem.id}" th:value="${mem.id}" th:id="id" th:name="id"></td>
                                            <td th:text="${mem.name}" th:value="${mem.name}"></td>
                                            <td th:text="${mem.email}" th:value="${mem.email}"></td>
                                            <td th:text="${mem.tel}" th:value="${mem.tel}"></td>
                                            <td th:text="${mem.joinDate}" th:value="${mem.joinDate}"></td>
                                            <td th:text="${mem.birthDate}" th:value="${mem.birthDate}"></td>
                                            <td th:text="${mem.genCd}" th:value="${mem.genCd}"></td>
                                            <td th:text="${mem.pointSum}" th:value="${mem.pointSum}"></td>
                                            <td th:text="${mem.memCd}" th:value="${mem.memCd}"></td>
                                            
                                            <td><button type="button" class="btn btn-success" style="color:white;">수정</button>
                                            &nbsp;
                                            <button th:if="${#strings.equals(mem.memCd, 'M1')}" type="button" class="btn btn-danger" 
                                            style="color:white;" th:attr="onclick=|deleteMember('${mem.id}')|">삭제</button></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
</form>

        <!-- 기록가 테이블  -->
        <div id="ptgTable">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-sm-12">
                        <div class="white-box">
                            <div>
                            <span>
                     <input type="button" class="box-title" style="background-color:white;border:none;" value="기록가" th:attr="onclick=|openPtgList()|">
  					&nbsp;<input type="button" class="box-title" style="background-color:white;border:none;color:grey;" value="사진관" th:attr="onclick=|openStdList()|">
                            </span>
		<br>
                                <p class="text-muted" style="float:left; font-size:16px; margin-top:3px;">
                                    신규 기록가: <code th:text="${todayPtg.size}"></code> &nbsp; 총 기록가: <code th:text="${ptgList.size}"></code></p>
                                <form role="search" class="app-search d-none d-md-block me-3">
                                    <ul style="list-style:none;float:right;">
                                        <li>
                                            <select style="width:120px;height:30px;font-size:16px;border:none;">
                                                <option value="">#번호</option>
                                                <option value="">작가아이디</option>
                                                <option value="">사진관아이디</option>
                                                <option value="">지역</option>
                                                <option value="">사업자등록번호</option>
                                                <option value="">인스타주소</option>
                                                <option value="">근무가능요일</option>
                                                <option value="">등록일자</option>
                                                <option value="">소속여부</option>
                                            </select>
                                            <input type="text" placeholder="Search..." class="form-control mt-0"
                                                style="display:inline-block;width:300px;height:30px;font-size:16px;">
                                            <a href="" class="active"><i class="fa fa-search"></i>
                                            </a>
                                        </li>
                                    </ul>
                                </form>
                            </div>

                            <br>
                            <hr>
                            <div class="table-responsive">
                                <table class="table text-nowrap">
                                    <thead>
                                        <tr>
                                            <!-- 보여줄 부분 -->
                                            <th class="border-top-0">#</th>
                                            <th class="border-top-0">작가아이디</th>
                                            <th class="border-top-0">사진관아이디</th>
                                            <th class="border-top-0">지역</th>
                                            <th class="border-top-0">사업자등록번호</th>
                                            <th class="border-top-0">인스타주소</th>
                                            <th class="border-top-0">근무가능요일</th>
                                            <th class="border-top-0">소속여부</th>
                                            <th class="border-top-0">등록일자</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                           <tr th:each="ptg,sts : ${ptgList}" th:Class="${sts}">                                
                                            <td th:text="${sts.count}"></td>    
                                            <td th:text="${ptg.ptgId}"></td>
                                            <td th:text="${ptg.stId}"></td>
                                            <td th:text="${ptg.regionCd}"></td>
                                            <td th:text="${ptg.crn}"></td>
                                            <td th:text="${ptg.inst}"></td>
                                            <td th:text="${ptg.workDay}"></td>
                                            <td th:text="${ptg.ptgCd}"></td>
                                            <td th:text="${ptg.regiDate}"></td>
                                            <td><button type="button" class="btn btn-success" style="color:white;">수정</button></td>
                                            <td><button type="button" class="btn btn-danger" style="color:white;">삭제</button></td>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 사진관 테이블 -->
        <div id="stdTable" style="display:none">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-sm-12">
                        <div class="white-box">
                            <div>
                            <span>
                     <input type="button" class="box-title" style="background-color:white;border:none;" value="기록가" th:attr="onclick=|openPtgList()|">
  					&nbsp;<input type="button" class="box-title" style="background-color:white;border:none;color:grey;" value="사진관" th:attr="onclick=|openStdList()|">
                            </span>
                            <br>
                                <p class="text-muted" style="float:left; font-size:16px; margin-top:3px;">
                                    신규 사진관: <code th:text="${todayStd.size}">5</code> &nbsp; 총 사진관: <code th:text="${stdList.size}"></code></p>
                                <form role="search" class="app-search d-none d-md-block me-3">
                                    <ul style="list-style:none;float:right;">
                                        <li>
                                            <select style="width:120px;height:30px;font-size:16px;border:none;">
                                                <option value="">#번호</option>
                                                <option value="">사진관아이디</option>
                                                <option value="">이름</option>
                                                <option value="">대표자</option>
                                                <option value="">전화번호</option>
                                                <option value="">지역</option>
                                                <option value="">주소</option>
                                                <option value="">사업자등록번호</option>
                                                <option value="">등록일자</option>
                                            </select>
                                            <input type="text" placeholder="Search..." class="form-control mt-0"
                                                style="display:inline-block;width:300px;height:30px;font-size:16px;">
                                            <a href="" class="active"><i class="fa fa-search"></i>
                                            </a>
                                        </li>
                                    </ul>
                                </form>
                            </div>

                            <br>
                            <hr>
                            <div class="table-responsive">
                                <table class="table text-nowrap">
                                    <thead>
                                        <tr>
                                            <!-- 보여줄 부분 -->
                                            <th class="border-top-0">#</th>
                                            <th class="border-top-0">사진관아이디</th>
                                            <th class="border-top-0">이름</th>
                                            <th class="border-top-0">대표자</th>
                                            <th class="border-top-0">전화번호</th>
                                            <th class="border-top-0">지역</th>
                                            <th class="border-top-0">주소</th>
                                            <th class="border-top-0">사업자등록번호</th>
                                            <th class="border-top-0">등록일자</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                           <tr th:each="std,sts : ${stdList}" th:Class="${sts}">                                
                                            <td th:text="${sts.count}"></td>    
                                            <td th:text="${std.stId}"></td>
                                            <td th:text="${std.stName}"></td>
                                            <td th:text="${std.ceoName}"></td>
                                            <td th:text="${std.tel}"></td>
                                            <td th:text="${std.regionCd}"></td>
                                            <td th:text="${std.addr}"></td>
                                            <td th:text="${std.crn}"></td>
                                            <td th:text="${std.regiDate}"></td>
                                            <td><button type="button" class="btn btn-success" style="color:white;">수정</button></td>
                                            <td><button type="button" class="btn btn-danger" style="color:white;">삭제</button></td>
                                        </tr>
                                        <!-- 삭제할 것 -->

                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
<script th:inline="javascript">
		const ptgTable = document.getElementById("ptgTable");
	    const stdTable = document.getElementById("stdTable");
	    
		function openPtgList(){
	    	ptgTable.style.display = 'block';
	    	stdTable.style.display = 'none';
	    };
	    
		function openStdList(){		
	    	ptgTable.style.display = 'none';
	    	stdTable.style.display = 'block';
	    };
	
	    
	    function deleteMember(id){
	    	var id = id;
	    	var str = $('#memberFrm').serialize();
	    	console.log('str: '+ str);
	    	if(confirm(id+"님을 정말 삭제하시겠습니까? 삭제 후 복구할 수 없습니다.")==true){
	      		alert("정상적으로 삭제됐습니다.");
	    		memberFrm.action = "/admin/deleteMember";
	    	}else{
	    		console.log("html에서 실행안됐음");
	    	}
	    	memberFrm.submit();

	    }
	    ;
</script>
    </div>
</body>
</html>